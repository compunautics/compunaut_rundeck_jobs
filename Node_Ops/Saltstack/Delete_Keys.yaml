- defaultTab: output
  description: Use this job to delete saltstack minion keys.
  executionEnabled: true
  group: Saltstack
  loglevel: INFO
  name: Delete Keys
  nodeFilterEditable: false
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: true
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: 'name: .*salt.*'
  nodesSelectedByDefault: true
  options:
  - description: Specify the keys to delete in glob format.
    name: key_to_delete
    required: true
    value: '*'
  scheduleEnabled: true
  sequence:
    commands:
    - description: List all keys
      exec: sudo salt-key -L
    - description: Accept all keys
      exec: sudo salt-key -d "${option.key_to_delete}" -y
    keepgoing: false
    strategy: node-first
  timeout: '300'

